te">&quot;0&quot;</SPAN> width=<SPAN class="code-quote">&quot;180&quot;</SPAN> height=<SPAN class="code-quote">&quot;15&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;textElement/&gt;</SPAN>
        <SPAN class="code-tag">&lt;text&gt;</SPAN><SPAN class="code-tag">&lt;![CDATA[Struts 2 JasperReports Sample]]&gt;</SPAN><SPAN class="code-tag">&lt;/text&gt;</SPAN>
      <SPAN class="code-tag">&lt;/staticText&gt;</SPAN>
    <SPAN class="code-tag">&lt;/band&gt;</SPAN>
  <SPAN class="code-tag">&lt;/title&gt;</SPAN>
  <SPAN class="code-tag">&lt;pageHeader&gt;</SPAN>
    <SPAN class="code-tag">&lt;band/&gt;</SPAN>
  <SPAN class="code-tag">&lt;/pageHeader&gt;</SPAN>
  <SPAN class="code-tag">&lt;columnHeader&gt;</SPAN>
    <SPAN class="code-tag">&lt;band height=<SPAN class="code-quote">&quot;20&quot;</SPAN>&gt;</SPAN>
      <SPAN class="code-tag">&lt;staticText&gt;</SPAN>
        <SPAN class="code-tag">&lt;reportElement x=<SPAN class="code-quote">&quot;180&quot;</SPAN> y=<SPAN class="code-quote">&quot;0&quot;</SPAN> width=<SPAN class="code-quote">&quot;180&quot;</SPAN> height=<SPAN class="code-quote">&quot;20&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;textElement&gt;</SPAN>
          <SPAN class="code-tag">&lt;font isUnderline=<SPAN class="code-quote">&quot;true&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;/textElement&gt;</SPAN>
        <SPAN class="code-tag">&lt;text&gt;</SPAN><SPAN class="code-tag">&lt;![CDATA[NAME]]&gt;</SPAN><SPAN class="code-tag">&lt;/text&gt;</SPAN>
      <SPAN class="code-tag">&lt;/staticText&gt;</SPAN>
      <SPAN class="code-tag">&lt;staticText&gt;</SPAN>
        <SPAN class="code-tag">&lt;reportElement x=<SPAN class="code-quote">&quot;360&quot;</SPAN> y=<SPAN class="code-quote">&quot;0&quot;</SPAN> width=<SPAN class="code-quote">&quot;180&quot;</SPAN> height=<SPAN class="code-quote">&quot;20&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;textElement&gt;</SPAN>
          <SPAN class="code-tag">&lt;font isUnderline=<SPAN class="code-quote">&quot;true&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;/textElement&gt;</SPAN>
        <SPAN class="code-tag">&lt;text&gt;</SPAN><SPAN class="code-tag">&lt;![CDATA[LASTNAME]]&gt;</SPAN><SPAN class="code-tag">&lt;/text&gt;</SPAN>
      <SPAN class="code-tag">&lt;/staticText&gt;</SPAN>
    <SPAN class="code-tag">&lt;/band&gt;</SPAN>
  <SPAN class="code-tag">&lt;/columnHeader&gt;</SPAN>
  <SPAN class="code-tag">&lt;detail&gt;</SPAN>
    <SPAN class="code-tag">&lt;band height=<SPAN class="code-quote">&quot;20&quot;</SPAN>&gt;</SPAN>
      <SPAN class="code-tag">&lt;textField&gt;</SPAN>
        <SPAN class="code-tag">&lt;reportElement x=<SPAN class="code-quote">&quot;180&quot;</SPAN> y=<SPAN class="code-quote">&quot;0&quot;</SPAN> width=<SPAN class="code-quote">&quot;180&quot;</SPAN> height=<SPAN class="code-quote">&quot;15&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;textElement/&gt;</SPAN>
        <SPAN class="code-tag">&lt;textFieldExpression&gt;</SPAN><SPAN class="code-tag">&lt;![CDATA[$F{name}]]&gt;</SPAN><SPAN class="code-tag">&lt;/textFieldExpression&gt;</SPAN>
      <SPAN class="code-tag">&lt;/textField&gt;</SPAN>
      <SPAN class="code-tag">&lt;textField&gt;</SPAN>
        <SPAN class="code-tag">&lt;reportElement x=<SPAN class="code-quote">&quot;360&quot;</SPAN> y=<SPAN class="code-quote">&quot;0&quot;</SPAN> width=<SPAN class="code-quote">&quot;180&quot;</SPAN> height=<SPAN class="code-quote">&quot;15&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;textElement/&gt;</SPAN>
        <SPAN class="code-tag">&lt;textFieldExpression&gt;</SPAN><SPAN class="code-tag">&lt;![CDATA[$F{lastName}]]&gt;</SPAN><SPAN class="code-tag">&lt;/textFieldExpression&gt;</SPAN>
      <SPAN class="code-tag">&lt;/textField&gt;</SPAN>
    <SPAN class="code-tag">&lt;/band&gt;</SPAN>
  <SPAN class="code-tag">&lt;/detail&gt;</SPAN>
  <SPAN class="code-tag">&lt;columnFooter&gt;</SPAN>
    <SPAN class="code-tag">&lt;band/&gt;</SPAN>
  <SPAN class="code-tag">&lt;/columnFooter&gt;</SPAN>
  <SPAN class="code-tag">&lt;pageFooter&gt;</SPAN>
    <SPAN class="code-tag">&lt;band height=<SPAN class="code-quote">&quot;15&quot;</SPAN>&gt;</SPAN>
      <SPAN class="code-tag">&lt;staticText&gt;</SPAN>
        <SPAN class="code-tag">&lt;reportElement x=<SPAN class="code-quote">&quot;0&quot;</SPAN> y=<SPAN class="code-quote">&quot;0&quot;</SPAN> width=<SPAN class="code-quote">&quot;40&quot;</SPAN> height=<SPAN class="code-quote">&quot;15&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;textElement/&gt;</SPAN>
        <SPAN class="code-tag">&lt;text&gt;</SPAN><SPAN class="code-tag">&lt;![CDATA[Page:]]&gt;</SPAN><SPAN class="code-tag">&lt;/text&gt;</SPAN>
      <SPAN class="code-tag">&lt;/staticText&gt;</SPAN>
      <SPAN class="code-tag">&lt;textField&gt;</SPAN>
        <SPAN class="code-tag">&lt;reportElement x=<SPAN class="code-quote">&quot;40&quot;</SPAN> y=<SPAN class="code-quote">&quot;0&quot;</SPAN> width=<SPAN class="code-quote">&quot;100&quot;</SPAN> height=<SPAN class="code-quote">&quot;15&quot;</SPAN>/&gt;</SPAN>
        <SPAN class="code-tag">&lt;textElement/&gt;</SPAN>
        <SPAN class="code-tag">&lt;textFieldExpression class=<SPAN class="code-quote">&quot;java.lang.Integer&quot;</SPAN>&gt;</SPAN><SPAN class="code-tag">&lt;![CDATA[$V{PAGE_NUMBER}]]&gt;</SPAN><SPAN class="code-tag">&lt;/textFieldExpression&gt;</SPAN>
      <SPAN class="code-tag">&lt;/textField&gt;</SPAN>
    <SPAN class="code-tag">&lt;/band&gt;</SPAN>
  <SPAN class="code-tag">&lt;/pageFooter&gt;</SPAN>
  <SPAN class="code-tag">&lt;summary&gt;</SPAN>
    <SPAN class="code-tag">&lt;band/&gt;</SPAN>
  <SPAN class="code-tag">&lt;/summary&gt;</SPAN>
<SPAN class="code-tag">&lt;/jasperReport&gt;</SPAN>
</PRE>
</DIV></DIV>

<P>Save this file in <TT>S2_WEBAPP/jasper/</TT> as 'our_jasper_template.jrxml'.</P>

<P>Most important: we declared the fields name and lastName (two properties from our <TT>Person</TT> class). This means we will now be able to use these fields in our Jasper template.</P>

<P>We define two columnheaders (NAME and LASTNAME), and then add our fields to the detail band (for a better explanation, look at the JR tutorial). This 'detail' band will iterate over our List of People. This is the default behaviour of JR - so if you want to display more information from the Person, add them to this band.</P>

<P>In the detail band we use the</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
$F{name}
</PRE>
</DIV></DIV>

<P>expression. JasperReports will ask Struts to retrieve the <TT>name</TT> field value from a <TT>Person</TT> object; the <TT>lastName</TT> field is handled the same way.</P>

<P>The rest is markup to define the layout.</P>

<DIV class="panelMacro"><TABLE class="tipMacro"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="https://cwiki.apache.org/confluence/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD>Use a logger (commons-logging, log4j, ...) to watch <TT>org.apache.struts2.views.jasperreports</TT> in debug mode, if you have any troubles.</TD></TR></TABLE></DIV>

<H2><A name="JasperReportsTutorial-RegisteringtheAction"></A>Registering the Action</H2>

<P>Using the JasperReports plugin requires adding the JasperReports result type as well as normal action configuration.</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>struts.xml</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
&lt;<SPAN class="code-keyword">package</SPAN> name=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">default</SPAN>&quot;</SPAN> namespace=<SPAN class="code-quote">&quot;/&quot;</SPAN> <SPAN class="code-keyword">extends</SPAN>=<SPAN class="code-quote">&quot;jasperreports-<SPAN class="code-keyword">default</SPAN>&quot;</SPAN>&gt;
    &lt;action name=<SPAN class="code-quote">&quot;myJasperTest&quot;</SPAN> class=<SPAN class="code-quote">&quot;com.acme.test.action.JasperAction&quot;</SPAN>&gt;
        &lt;result name=<SPAN class="code-quote">&quot;success&quot;</SPAN> type=<SPAN class="code-quote">&quot;jasper&quot;</SPAN>&gt;
            &lt;param name=<SPAN class="code-quote">&quot;location&quot;</SPAN>&gt;/jasper/our_compiled_template.jasper&lt;/param&gt;
            &lt;param name=<SPAN class="code-quote">&quot;dataSource&quot;</SPAN>&gt;myList&lt;/param&gt;
            &lt;param name=<SPAN class="code-quote">&quot;format&quot;</SPAN>&gt;PDF&lt;/param&gt;
        &lt;/result&gt;
    &lt;/action&gt;
    ...
&lt;/<SPAN class="code-keyword">package</SPAN>&gt;
</PRE>
</DIV></DIV>

<P>To use the JasperReports result type we must either (a) extend the <TT>jasperreports-default</TT> package that defines it or (b) manually define the JasperReport <TT>jasper</TT> result type ourselves.</P>

<P>In the above example we extend the <TT>jasperreports-default</TT> package; we can define the <TT>jasper</TT> result type manually by defining it the same way the JasperReport plugin does:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Manually defining the &quot;jasper&quot; result type</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;result-types&gt;</SPAN>
    <SPAN class="code-tag">&lt;result-type name=<SPAN class="code-quote">&quot;jasper&quot;</SPAN> class=<SPAN class="code-quote">&quot;org.apache.struts2.views.jasperreports.JasperReportsResult&quot;</SPAN>/&gt;</SPAN>
<SPAN class="code-tag">&lt;/result-types&gt;</SPAN>
</PRE>
</DIV></DIV>

<P>We configure our JasperAction with the name 'myJasperTest' - this means that we can execute this Action by sending a request to <TT>myJasperTest.action</TT> in our browser.</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
&lt;action name=<SPAN class="code-quote">&quot;myJasperTest&quot;</SPAN> class=<SPAN class="code-quote">&quot;com.acme.test.action.JasperAction&quot;</SPAN>&gt;
</PRE>
</DIV></DIV>

<P>When our JasperAction executes correctly, we will use the Result type registered with the name 'jasper'. As discussed above the &quot;jasper&quot; result type is available from either extending the &quot;jasperreports-default&quot; package or by defining the result type manually.</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
&lt;result name=<SPAN class="code-quote">&quot;success&quot;</SPAN> type=<SPAN class="code-quote">&quot;jasper&quot;</SPAN>&gt;
</PRE>
</DIV></DIV>

<P>The &quot;location&quot; parameter defines the location of the compiled jasper file, which will be filled by Struts 2 with our dataSource:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
&lt;param name=<SPAN class="code-quote">&quot;location&quot;</SPAN>&gt;/jasper/our_compiled_template.jasper&lt;/param&gt;
</PRE>
</DIV></DIV>

<P>The &quot;dataSource&quot; parameter defines the action property containing the collection of objects to use in our report. In this case it's the <TT>myList</TT> property which we manually filled with some <TT>Person</TT> objects.</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
&lt;param name=<SPAN class="code-quote">&quot;dataSource&quot;</SPAN>&gt;myList&lt;/param&gt;
</PRE>
</DIV></DIV>

<P>The &quot;format&quot; parameter specifies the output format of the report. Possible values include PDF, CSV, XLS and HTML.</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
&lt;param name=<SPAN class="code-quote">&quot;format&quot;</SPAN>&gt;PDF&lt;/param&gt;
</PRE>
</DIV></DIV>

<H2><A name="JasperReportsTutorial-Conclusion"></A>Conclusion</H2>

<P>You should now be able to execute <A href="http://localhost:8080/YOUR_WEBAPP/myJasperTest.action" class="external-link" rel="nofollow">http://localhost:8080/YOUR_WEBAPP/myJasperTest.action</A> &#45; and you should see a nice list of names.<BR>
Struts provides probably the most elegant way to deal with JasperReport files; specify the location of the .jasper file, specify what dataSource you want to use, and there you go.</P>

<H2><A name="JasperReportsTutorial-BacktoTutorials"></A>Back to <A href="tutorials.html" title="Tutorials">Tutorials</A></H2>
        </DIV>

        
      </DIV>
    </DIV>
    <DIV class="footer">
      Generated by
      <A href="http://www.atlassian.com/confluence/">Atlassian Confluence</A> (Version: 3.4.9 Build: 2042 Feb 14, 2011)
      <A href="http://could.it/autoexport/">Auto Export Plugin</A> (Version: 1.0.0-dkulp)
    </DIV>
  </BODY>
</HTML>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   